<%- contentFor('body') %>

  <div class="w-full">
    <div class="px-4 md:px-6 lg:px-8 text-center">
      <h1 class="text-2xl md:text-3xl font-bold mb-4">Story part unlocked!</h1>
      <p class="mb-2">You just unlocked: <span class="font-semibold"><%= part.title %></span></p>
      <p class="mb-6 text-sm text-gray-300">Redirecting to the story part...</p>
      <a class="underline text-halloween-orange" href="/stories/part/<%= part.id %>">Open now</a>
    </div>
  </div>

<%- contentFor('extraScripts') %>
<script>
  (function(){
    try {
      const id = <%= part.id %>;
      const key = 'unlockedStoryParts';
      const arr = JSON.parse(localStorage.getItem(key) || '[]');
      if (!arr.includes(Number(id))) {
        arr.push(Number(id));
        localStorage.setItem(key, JSON.stringify(arr));
      }
    } catch (_) {}
    setTimeout(function(){
      window.location.replace('/stories/part/<%= part.id %>');
    }, 1000);
  })();
</script>

